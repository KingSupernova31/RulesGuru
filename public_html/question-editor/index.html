<!DOCTYPE html>

<html>
	<head>
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=UA-122686421-1"></script>
		<script>
		  window.dataLayer = window.dataLayer || [];
		  function gtag(){dataLayer.push(arguments);}
		  gtag('js', new Date());

		  gtag('config', 'UA-122686421-1');
		</script>

		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<link rel="stylesheet" href="/globalResources/globalcss.css">
		<script defer src="/globalResources/globaljs&html.js"></script>

		<link rel="stylesheet" href="/globalResources/mana.min.css">
		<link rel="stylesheet" href="question-editor.css">
		<link rel="stylesheet" href="/globalResources/sidebar.css">
		<link rel="preload" as="image" href="cr-hover.png">
		<link rel="preload" as="image" href="../globalResources/icons/about-hover.png">
		<script defer src="/globalResources/allTags.js"></script>
		<script defer src="allCards.js"></script>
		<script defer src="/globalResources/allSets.js"></script>
		<script defer src="/globalResources/searchLinkMappings.js"></script>
		<script defer src="allRules.js"></script>
		<script defer src="/globalResources/sidebarjs&html.js"></script>
		<script defer src="/globalResources/searchLinks.js"></script>
		<script defer src="/globalResources/sidebarDelayedLoading.js"></script>
		<script defer src="/globalResources/allKeywords.js"></script>
		<script defer src="/globalResources/templateConvert.js"></script>
		<script defer src="validateQuestion.js"></script>
		<script defer src="savedAnnouncements.js"></script>
		<script defer src="question-editor.js"></script>

		<style id="cursorStyle"></style>
	</head>
	<body>
		<a href="/admin-information" id="adminAboutLink" target="_blank">
			<img src="../globalResources/icons/about.png" class="bannerImage">
			<p>Admin Info</p>
		</a>
		<a href="https://www.yawgatog.com/resources/magic-rules/" id="rulesLink" target="_blank">
			<img src="cr.png" class="bannerImage">
			<p>Comp Rules</p>
		</a>
		<div id="pageContent">
			<div id="ownerOnly">
				<button class="specialButtonBlack" id="showQuestionsListButton">Show Questions List</button>
				<div id="hideWhenQuestionsListOpen">
					<button class="specialButtonBlack" id="showTagEditorButton">Show Tag Editor</button>
					<button class="specialButtonBlack" id="showAdminEditorButton">Show Admin Editor</button>
					<button class="specialButtonBlack" id="showInformationEditorButton">Show Information</button>
					<button class="specialButtonBlack" id="setToPendingButton">Set to Pending</button>
					<label id="ignoreValidationLabel">Ignore question validation <input type="checkbox" id="ignoreValidationCheckbox"></label>
				</div>
			</div>
			<div id="tagEditor" class="roundedCorners">
				<h3>Edit Tags</h3>
				<button class="tagEditorTab activeTab" id="tagEditorTabAddRemove">Add/Remove</button>
				<button class="tagEditorTab" id="tagEditorTabSuggestions">Suggestions</button>
				<button class="tagEditorTab" id="tagEditorTabList">List</button>
				<div class="tagEditorPage" id="tagEditorAddRemove">
					<p><b>Add:</b> Adds the specified tag to the list of possible tags. It is not added to any questions or suggestions.</p>
					<br>
					<p><b>Delete:</b> Deletes the specified tag from the list of possible tags and removes the tag from all questions and suggestions.</p>
					<br>
					<p><b>Rename:</b> Changes all instances of the first tag on any question and suggestions to the second tag. Deletes the first tag from the list of possible tags. If the second tag was previously unavailable, adds it to the list of all possible tags. Fails if the first tag is autogenerated.</p>
					<div id="tagEditorAddRemoveCenter">
						<select id="tagEditorAddRemoveSelect">
							<option>Add</option>
							<option>Delete</option>
							<option>Change</option>
						</select>
						<input list="tagsList" id="tagEditorAddRemoveInput1">
						<p id="tagEditorAddRemoveCount1" class="tagEditorAddRemoveCount" tooltip="The number of questions that currently have this tag.">(0)</p>
						<div id="tagEditorAddRemoveIntoDiv">
							<label>Into
								<input list="tagsList" id="tagEditorAddRemoveInput2">
							</label>
							<p id="tagEditorAddRemoveCount2" class="tagEditorAddRemoveCount" tooltip="The number of questions that currently have this tag.">(0)</p>
						</div>
					</div>
				</div>
				<div class="tagEditorPage" id="tagEditorSuggestions">
					<select id="tagEditorSuggestionsSelect">
						<option>Tag</option>
						<option>Rule</option>
						<option>Ranges</option>
					</select>
						<input id="tagEditorSuggestionsInput" list="tagsList">
					<div id="tagEditorSuggestionsListsContainerTag">
						<div class="tagEditorSuggestionsLeft">
							<h4>Suggested by:</h4>
							<input list="tagsList">
							<ul id="tagEditorSuggestionsSuggestedByList">
							</ul>
						</div>
						<div class="tagEditorSuggestionsRight">
							<h4>Suggests:</h4>
							<input list="tagsList">
							<ul id="tagEditorSuggestionsSuggestsList">
							</ul>
						</div>
					</div>
					<div id="tagEditorSuggestionsListsContainerRule">
						<div class="tagEditorSuggestionsLeft">
							<h4>Ranges:</h4>
							<input>
							<ul>
							</ul>
						</div>
						<div class="tagEditorSuggestionsRight">
							<h4>Suggests:</h4>
							<input list="tagsList">
							<ul>
							</ul>
						</div>
					</div>
					<div id="tagEditorSuggestionsListsContainerRanges">
						<label>First:
							<input>
						</label>
						<label>Last:
							<input>
						</label>
						<p>(Leave blank to expand to the end.)</p>
						<ul>
						</ul>
					</div>
				</div>
				<div class="tagEditorPage" id="tagEditorList">
					<ul id="tagEditorListList">
					</ul>
				</div>
				<div id="tagEditorBottomDiv">
					<button class="specialButtonBlack" id="tagEditorConfirmButton">Confirm</button>
					<button class="specialButtonBlack" id="tagEditorCancelButton">Cancel</button>
				</div>
			</div>
			<div id="adminEditor" class="roundedCorners">
				<h3>Admin Editor</h3>
				<select id="adminNames"></select>
				<button id="newAdmin" onclick="addNewAdmin()">New</button>
				<label>Name
					<input id="adminEditorInputName" onchange="updateAdminData()" onkeyup="updateAdminName(this)"></input>
				</label>
				<label>Password
					<input id="adminEditorInputPassword" onchange="updateAdminData()"></input>
				</label>
				<div id="adminEditorInputRules" onchange="updateAdminData()">
					<p>Roles:</p>
					<ul id="adminEditorRolesList">
						<li><label><input type="checkbox" id="adminEditorEditor"> Editor</label></li>
						<li><label><input type="checkbox" id="adminEditorGrammarGuru"> Grammar Guru</label></li>
						<li><label><input type="checkbox" id="adminEditorTemplateGuru"> Template Guru</label></li>
						<li><label><input type="checkbox" id="adminEditorRulesGuru"> Rules Guru</label></li>
						<li><label><input type="checkbox" id="adminEditorOwner"> Owner</label></li>
					</ul>
				</div>
				<label>Email address
					<input id="adminEditorInputEmailAddress" onchange="updateAdminData()"></input>
				</label>
				<label>Reminder email frequency
					<select id="adminEditorInputEmailFrequency" onchange="updateAdminData()">
						<option>Daily</option>
						<option>Daily except weekends</option>
						<option>Every three days</option>
						<option>Every Sunday and Tuesday</option>
						<option>Every Tuesday and Friday</option>
						<option>Weekly</option>
						<option>Never</option>
					</select>
				</label>
				<label>Send self edit log emails
					<select id="adminEditorInputEditLogEmails" onchange="updateAdminData()">
						<option>True</option>
						<option>False</option>
					</select>
				</label>
				<div id="adminEditorBottomDiv">
					<button class="specialButtonBlack" id="adminEditorConfirmButton" onclick="performAdminEdit();">Confirm</button>
					<button class="specialButtonBlack" id="adminEditorCancelButton">Cancel</button>
				</div>
			</div>
			<div id="informationEditor" class="roundedCorners">
				<h3>Information Editor</h3>
				<select id="informationEditorSelect"></select>
				<textarea id="informationEditorText"></textarea>
				<div id="informationEditorBottomDiv">
					<button class="specialButtonBlack" id="informationEditorConfirmButton">Save</button>
					<button class="specialButtonBlack" id="informationEditorCancelButton">Cancel</button>
				</div>
			</div>
			<button class="specialButtonBlack" id="previewButton">Preview</button>
			<h4 id="questionsListCount">0 matching questions:</h4>
			<textarea id="questionsListDisplay" readonly></textarea>

			<div id="topCenterDiv">
				<h1>Question Editor</h1>
				<label id="passwordLabel">Password: <input id="password" type="password"><br></label>
				<p id="welcomeText"></p>
				<button class="specialButtonBlack" id="loginButton">Log In</button>
				<button class="specialButtonBlack" id="logOutButton">Log Out</button>
				<button class="specialButtonBlack" onclick="getUnfinishedQuestion()" id="getUnfinishedQuestionButton">Get Unfinished Question</button>
				<button class="specialButtonBlack" id="getQuestionButton" onclick="getQuestionId(Number(document.getElementById('getQuestionIdInput').value))">Get Question # </button>
				<input id="getQuestionIdInput" onclick="this.select();" maxlength="4" autocomplete="off" type="number" min="1" max="9999">
				<p id="questionInfo">Currently editing question #<span id="currentID"></span>. (<span id="status"></span>)</p>
				<p id="questionSubmitterNameField">Submitted by <input id="submitterName"></input></p>
			</div>

			<div class="fakeTooltip" id="expressionTooltip">
				<p><b>Subjective:</b> he/she/they</p>
				<p><b>Objective:</b> him/her/them</p>
				<p><b>Possessive Pronoun:</b> his/hers/theirs</p>
				<p><b>Possessive Adjective:</b> his/her/their</p>
				<br>
				<p>Conjugation is singular first.</p>
				<br>
				<p>"[AP s] [AP casts|cast] a spell."</p>
				<p>"She casts a spell."</p>
				<p>"They cast a spell."</p>
			</div>

			<div id="questionStuffDiv">
				<label id="levelLabel">
					<p class="optionLabel">Level:</p>
					<select id="level">
						<option></option>
						<option>1</option>
						<option>2</option>
						<option>3</option>
						<option>Corner Case</option>
					</select>
				</label>
				<button id="clearFields" class="specialButtonBlack" onclick="executeClearFieldsButton()">Clear All Fields</button>
				<label id="complexityLabel">
					<p class="optionLabel">Complexity:</p>
					<select id="complexity">
						<option></option>
						<option>Simple</option>
						<option>Intermediate</option>
						<option>Complicated</option>
					</select>
				</label>
				<div class="emptyCell"></div>
				<div class="emptyCell"></div>
				<div class="emptyCell"></div>
				<div class="emptyCell"></div>
				<div class="emptyCell"></div>
				<textarea id="question" placeholder="Question"></textarea>
				<textarea id="answer" placeholder="Answer"></textarea>
				<div class="emptyCell"></div>
				<div class="emptyCell"></div>
				<label id="tags">
					<p>Tags:</p>
					<input list="tagsList" id="tagInput" onkeydown="if (event.keyCode === 13) {addTag(this.value);}" onclick="this.select();">
					<datalist id="tagsList"></datalist>
					<button class="specialButtonBlack" onclick="addTag(document.getElementById('tagInput').value)">Add Tag</button>
				</label>
				<div id="iHaveNoIdeaWhyThisNeedsToBeHereButIfItGoesAwayTheButtonIsGiant">
					<button class="specialButtonBlack" onclick="addCardGenerator()">Add Card Generator</button>
				</div>
				<div id="tagsDiv">
					<ul id="tagList"></ul>
					<br><br>
					<div id="questionEditButtons">
						<button onclick="changeStatusUpwards()" id="changeStatusUpwards" class="specialButtonBlack">Approve</button><!---
				---><button onclick="changeStatusDownwards()" id="changeStatusDownwards" class="specialButtonBlack">Unapprove</button><!---
				---><button onclick="update()" id="updateButton" class="specialButtonBlack">Update</button><!---
				---><button onclick="submit()" id="submitButton" class="specialButtonBlack">Submit as New Question</button>
					</div>
				</div>
				<ul id="cardGenerators"></ul>
			</div>

			<div id="multiEntryDiv" class="roundedCorners">
				<h3 id="multiEntryHeading">Add cards to list X</h3>
				<p>Type or paste in a list of cards to be added to cardlist X. Each card must be on its own line, and spelled correctly.</p>
				<textarea id="multiEntryText"></textarea>
				<button class="specialButtonBlack" onclick="processMultiEntry();">Confirm</button>
				<button class="specialButtonBlack" id="cancelMultiEntryBox">Cancel</button>
			</div>
			<div id="templateScrollContainer" class="roundedCorners">
				<div id="templateDiv">
					<h3 id="templateBoxHeading">Add rules to template X</h3>
					<p>Add any number of rules to this template. A set of cards that follows all rules will be dynamically generated for the question.</p>
					<br>
					<select id="templateRuleList">
						<option>Layout</option>
						<option>Multi-part side</option>
						<option>Colors</option>
						<option>Mana cost</option>
						<option>Mana value</option>
						<option>Supertypes</option>
						<option>Types</option>
						<option>Subtypes</option>
						<option>Rules text</option>
						<option>Keywords</option>
						<option>Power</option>
						<option>Toughness</option>
						<option>Loyalty</option>
						<option>Number of</option>
					</select>
					<button class="specialButtonBlack" onclick="addTemplateRule(document.getElementById('templateRuleList').value)">Add rule</button>
					<br><br>
					<div id="templateRules"></div>
					<div id="templateBottomDiv">
						<button class="specialButtonBlack" onclick="processTemplateBox();">Confirm</button>
						<button class="specialButtonBlack" id="cancelTemplateBox">Cancel</button>
					</div>
				</div>
			</div>
			<div id="ownerOptionsGreyout"></div>
			<div id="cardGeneratorgreyout"></div>
		</div>

		<div id="FOUCOverlay"></div>
		<div id="jsDisabled">
			<h1>Welcome to RulesGuru!</h1>
			<p>It looks like your Javascript is disabled. You'll need to enable it in order for the site to work.</p>
		</div>
		<div id="jsOutOfDate">
			<h1>Welcome to RulesGuru!</h1>
			<p>It looks like your browser is out of date. You'll need to update it to a newer version in order for the site to work.</p>
		</div>
		<script>
			//Check for Javascript
			document.getElementById("jsDisabled").style.display = "none";
			eval("const foo = 'bar'");
			document.getElementById("jsOutOfDate").style.display = "none";

			//Handle sites that append garbage to the url.
			if (window.location.href !== window.location.href.match(/https?:\/\/.+?\/(\?\d+)?/)[0]) {
				if (window.location.href.match(/https?:\/\/.+\/\?\d+/)) {
					history.replaceState({}, "", `./\?${window.location.href.match(/https?:\/\/.+?\/\?(\d+)/)[1]}`);
				} else {
					history.replaceState({}, "", ".");
				}
			}
		</script>
	</body>
</html>
